---
# https://www.siberoloji.com/how-to-stream-audio-with-obs-on-arch-linux/
#
- name: "{{ role_name | capitalize }} | {{ ansible_distribution | replace('linux', '') }} | Install audio"
  community.general.pacman:
    name:
      - pipewire
      - pipewire-audio
      - pipewire-jack
      - pipewire-pulse
      # - pipewire-v4l2
      - wireplumber
      # - lib32-pipewire
      # - lib32-pipewire-jack
      # - lib32-pipewire-v4l2
      - pavucontrol
      - easyeffects
      - lsp-plugins
      - lsp-plugins-lv2
      # - helvum # JACK-like routing | graphical PipeWire patchbay
    state: present
  become: true

- name: "{{ role_name }} | {{ ansible_distribution }} | Enable pipewire service"
  ansible.builtin.systemd:
    name: pipewire.service
    enabled: true
  become: true

- name: "{{ role_name }} | {{ ansible_distribution }} | Enable wireplumber service"
  ansible.builtin.systemd:
    name: wireplumber.service
    enabled: true
  become: true